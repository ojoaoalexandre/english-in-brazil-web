(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{45824:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/setting",function(){return a(28025)}])},41563:function(e,s,a){"use strict";var r=a(85893),n=a(9008),t=a.n(n);s.Z=function(e){var s=e.title;return(0,r.jsx)(t(),{children:(0,r.jsx)("title",{children:s})})}},28025:function(e,s,a){"use strict";a.r(s),a.d(s,{__N_SSP:function(){return C},default:function(){return S}});var r=a(47568),n=a(14924),t=a(26042),i=a(69396),o=a(34051),l=a.n(o),d=a(85893),c=a(83898),v=a(11163),u=a(67294),x=a(86501),g=a(54748),h=a(56516),m=a(13174),p=a(73753),j=a(91875),f=a(16940),w=a(4298),b=a.n(w),N=a(79352),y=function(e){var s=e.studentId,a=e.avatarId,n=e.token,t=(0,v.useRouter)(),i=(0,u.useState)(!0),o=i[0],c=i[1],g=function(){var e=(0,r.Z)(l().mark((function e(r,t){var i,o,d,c=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=c.length>2&&void 0!==c[2]&&c[2],o=new FormData,i?(d=new File([r],t,{type:"image/svg+xml"}),o.append("files",d)):o.append("files",r,t),o.append("ref","api::aluno.aluno"),o.append("refId",s.toString()),o.append("field","avatar"),!a){e.next=9;break}return e.next=9,fetch("".concat("https://cadastro.englishinbrazil.com.br","/api/upload/files/").concat(a),{method:"DELETE",headers:{Authorization:"Bearer ".concat(n)}});case 9:return e.next=11,fetch("".concat("https://cadastro.englishinbrazil.com.br","/api/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(n)},body:o});case 11:case"end":return e.stop()}}),e)})));return function(s,a){return e.apply(this,arguments)}}(),h=function(){var e;return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="200px" height="200px" viewBox="0 0 200 200" style="overflow:hidden!important;">'+(null===(e=document.getElementById("svga-svgmain"))||void 0===e?void 0:e.innerHTML.replace(/<svg(.*?)>/,"").replace(/data-(.*?)\"(.*?)\"/g,"").replace(/   /g," ").replace(/  /g," ").replace(/  /g," "))},m=function(){var e=(0,r.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.reload();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=(0,r.Z)(l().mark((function e(){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!o),a=h(),e.next=4,g(a,"avatar-".concat(s,".svg"),!0);case 4:t.reload();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(l().mark((function e(s){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(!o),!s.target.files){e.next=11;break}if(!["image/svg+xml","image/jpeg","image/png","image/webp"].includes(s.target.files[0].type)){e.next=9;break}return a=s.target.files[0],e.next=7,g(a,a.name);case 7:e.next=11;break;case 9:return x.Am.error("Selecione um formato de imagem v\xe1lido!"),e.abrupt("return");case 11:t.reload();case 12:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{id:"svgAvatars",children:(0,d.jsxs)("div",{id:"svga-container",className:"svga-no-touch p-4 rounded-md bg-white",children:[(0,d.jsx)("div",{className:"flex justify-end",children:(0,d.jsx)("button",{onClick:m,className:"px-2 text-2xl font-bold text-theme-red-500",children:(0,d.jsx)(N.qFC,{})})}),(0,d.jsx)("div",{id:"svga-canvas-wrap",children:(0,d.jsx)("canvas",{id:"svga-canvas"})}),(0,d.jsxs)("div",{className:"svga-row flex flex-col md:flex-row",children:[(0,d.jsxs)("div",{className:"svga-col-left w-full table",children:[(0,d.jsx)("div",{className:"svga-vert-order-glob-controls table-row-group w-full",children:(0,d.jsx)("div",{className:"svga-row row-glob-controls",children:(0,d.jsx)("div",{id:"svga-glob-controls",className:"scrollbar scroll-simple_outer"})})}),(0,d.jsx)("div",{className:"svga-vert-order-colors table-footer-group",children:(0,d.jsxs)("div",{className:"svga-row row-colors",children:[(0,d.jsx)("div",{id:"svga-custom-color",children:(0,d.jsx)("input",{type:"text"})}),(0,d.jsx)("div",{id:"svga-colors-wrap",children:(0,d.jsx)("div",{id:"svga-colors",className:"scrollbar scroll-simple_outer"})})]})}),(0,d.jsx)("div",{className:"svga-vert-order-svgcanvas table-header-group",children:(0,d.jsx)("div",{className:"svga-row row-svgcanvas",children:(0,d.jsx)("div",{id:"svga-svgmain"})})})]}),(0,d.jsxs)("div",{className:"svga-col-right",children:[(0,d.jsx)("div",{className:"svga-vert-order-controls",children:(0,d.jsx)("div",{className:"svga-row row-controls",children:(0,d.jsx)("div",{id:"svga-controls",className:"scrollbar scroll-simple_outer"})})}),(0,d.jsx)("div",{className:"svga-vert-order-main",children:(0,d.jsxs)("div",{className:"svga-android-hack",children:[(0,d.jsx)("div",{className:"svga-vert-order-elements",children:(0,d.jsx)("div",{className:"svga-row row-elements",children:(0,d.jsx)("div",{id:"svga-elements",className:"scrollbar scroll-simple_outer"})})}),(0,d.jsx)("div",{className:"svga-vert-order-bodyzones",children:(0,d.jsx)("div",{className:"svga-row row-bodyzones",children:(0,d.jsx)("div",{id:"svga-bodyzones"})})}),(0,d.jsx)("div",{className:"svga-vert-order-blocks",children:(0,d.jsx)("div",{className:"svga-row",children:(0,d.jsx)("div",{id:"svga-blocks",className:"scrollbar scroll-simple_outer"})})})]})}),(0,d.jsx)("div",{className:"svga-row",children:(0,d.jsx)("div",{id:"svga-footermenu",children:o&&(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{id:"svga-randomavatar",children:(0,d.jsx)("span",{children:"Random"})}),(0,d.jsx)("li",{id:"svga-resetavatar",children:(0,d.jsx)("span",{children:"Reset"})}),(0,d.jsx)("li",{id:"svga-saveavatar",onClick:p,children:(0,d.jsx)("span",{children:"Save"})})]})})})]})]}),(0,d.jsx)("div",{id:"svga-start-overlay",children:"\xa0"}),(0,d.jsx)("div",{id:"svga-work-overlay",children:"\xa0"}),(0,d.jsx)("div",{id:"svga-loader",children:(0,d.jsx)("p",{children:"Please wait..."})}),(0,d.jsxs)("div",{id:"svga-gender",children:[(0,d.jsx)("h2",{children:"Create Your Avatar"}),(0,d.jsxs)("div",{id:"svga-starticons-wrap",children:[(0,d.jsx)("div",{id:"svga-start-boys"}),(0,d.jsx)("div",{id:"svga-start-girls"})]}),(0,d.jsx)("p",{children:"Please, choose a gender"}),(0,d.jsx)("p",{children:"or select a image from device"}),(0,d.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){return j(e)}})]}),(0,d.jsxs)("div",{id:"svga-dialog",children:[(0,d.jsx)("h3",{children:"Are you sure?"}),(0,d.jsx)("p",{children:"The all current changes will be lost."}),(0,d.jsxs)("div",{id:"svga-dialog-btns",children:[(0,d.jsx)("div",{id:"svga-dialog-ok",children:"Ok"}),(0,d.jsx)("div",{id:"svga-dialog-cancel",children:"Cancel"})]})]}),(0,d.jsxs)("div",{id:"svga-message",children:[(0,d.jsx)("div",{id:"svga-message-text"}),(0,d.jsx)("div",{className:"svga-close",children:"Close"})]}),(0,d.jsxs)("div",{id:"svga-gravatar-message",children:[(0,d.jsx)("div",{id:"svga-gravatar-message-text"}),(0,d.jsx)("div",{id:"svga-tryagain",children:"Try Again"})]}),(0,d.jsxs)("div",{id:"svga-ios",children:[(0,d.jsx)("div",{id:"svga-ios-text",children:(0,d.jsx)("p",{children:"Please tap and hold the image and choose Save"})}),(0,d.jsx)("div",{id:"svga-ios-image"}),(0,d.jsx)("div",{className:"svga-close",children:"Close"})]}),(0,d.jsxs)("div",{id:"svga-share-block",children:[(0,d.jsx)("div",{id:"svga-share-image"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{id:"svga-share-twitter",children:(0,d.jsx)("a",{href:"#",children:(0,d.jsx)("span",{id:"svga-twitter-icon"})})}),(0,d.jsx)("li",{id:"svga-share-pinterest",children:(0,d.jsx)("a",{href:"#",children:(0,d.jsx)("span",{id:"svga-pinterest-icon"})})})]}),(0,d.jsx)("div",{className:"svga-close",children:"Close"})]})]})}),(0,d.jsx)(b(),{src:"svgavatars/js/tools/svg.min.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/tools/jquery.scrollbar.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/tools/spectrum.min.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/tools/rgbcolor.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/tools/StackBlur.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/tools/canvg.min.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/svgavatars.defaults.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/languages/svgavatars.en.js"}),(0,d.jsx)(b(),{src:"svgavatars/js/svgavatars.core.js"})]})},k=a(41563),C=!0,S=function(e){var s=e.user,a=e.me,o=e.live,w=e.news,b=(0,g.U)().config,N=(0,v.useRouter)(),C=(0,u.useState)(!1),S=C[0],_=C[1],z=(0,u.useState)({name:a.user.name,passwordNew:"",passwordNewConfirmation:"",bio:""}),Z=z[0],A=z[1],P=function(){var e=(0,r.Z)(l().mark((function e(a){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),x.ZP.promise(fetch("".concat("https://cadastro.englishinbrazil.com.br","/api/aluno/meusDados"),{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify({primeiroNome:Z.name,bio:Z.bio})}),{loading:"Atualizando Cadastro...",success:"Cadastro Atualizado",error:"N\xe3o foi poss\xedvel atualizar o cadastro"}),""==Z.passwordNew&&""==Z.passwordNewConfirmation){e.next=16;break}if(!(Z.name.length<3)){e.next=6;break}return e.abrupt("return",x.ZP.error("Favor informar um nome com mais de 3 caracteres"));case 6:if(!(Z.passwordNew&&(null===(r=Z.passwordNew)||void 0===r?void 0:r.length)<6)){e.next=9;break}return x.ZP.error("Sua senha deve ter no m\xednimo 6 caracteres"),e.abrupt("return");case 9:if(Z.passwordNew&&Z.passwordNewConfirmation){e.next=12;break}return x.ZP.error("Favor preencher os dois campos de senha"),e.abrupt("return");case 12:if(Z.passwordNew===Z.passwordNewConfirmation){e.next=15;break}return x.ZP.error("As senhas devem ser iguais"),e.abrupt("return");case 15:x.ZP.promise(fetch("".concat("https://cadastro.englishinbrazil.com.br","/api/aluno/resetPassword"),{method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(s.token)},body:JSON.stringify({password:Z.passwordNew,passwordConfirmation:Z.passwordNewConfirmation})}),{loading:"Atualizando Senha...",success:"Senha Atualizada",error:"N\xe3o foi poss\xedvel atualizar a senha"});case 16:return e.next=18,(0,h.N)(s.token);case 18:N.reload();case 19:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),E=function(e){var s=e.target.name,a=e.target.value;A((function(e){return(0,i.Z)((0,t.Z)({},e),(0,n.Z)({},s,a))}))};return(0,u.useEffect)((function(){b(a)}),[]),(0,d.jsx)(f.s,{children:(0,d.jsxs)("section",{className:"flex flex-col-reverse lg:flex-row w-full",children:[(0,d.jsx)(k.Z,{title:"In\xedcio"}),(0,d.jsxs)("div",{className:"flex flex-col w-full gap-8 p-4 md:p-8",children:[(0,d.jsx)(c.B,{path:[{title:"Setting",url:"/setting"}]}),(0,d.jsxs)("section",{className:"flex flex-col h-full gap-4",children:[(0,d.jsxs)("header",{className:"flex flex-col leading-none pl-2 mb-1 text-gray-800 dark:text-gray-200",children:[(0,d.jsx)("h3",{className:"font-semibold text-2xl",children:"Configura\xe7\xf5es"}),(0,d.jsx)("p",{children:"Edite suas informa\xe7\xf5es"})]}),(0,d.jsxs)("div",{className:"flex flex-col w-full bg-white dark:bg-theme-gray-900 dark:text-white p-4 rounded-md gap-4",children:[(0,d.jsxs)("form",{onSubmit:P,className:"flex flex-col gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("label",{htmlFor:"name",className:"pl-1 font-semibold text-sm",children:"Nome"}),(0,d.jsx)("input",{type:"text",name:"name",className:"w-full rounded-md px-4 py-2 bg-gray-200 dark:bg-theme-gray-600",placeholder:"Insira seu nome...",value:Z.name,onChange:function(e){return E(e)}})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("label",{htmlFor:"name",className:"pl-1 font-semibold text-sm",children:"Nova Senha"}),(0,d.jsx)("input",{type:"password",name:"passwordNew",className:"w-full rounded-md px-4 py-2 bg-gray-200 dark:bg-theme-gray-600",placeholder:"Insira sua nova senha...",value:Z.passwordNew,onChange:function(e){return E(e)}})]}),(0,d.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,d.jsx)("label",{htmlFor:"name",className:"pl-1 font-semibold text-sm",children:"Repetir Nova Senha"}),(0,d.jsx)("input",{type:"password",name:"passwordNewConfirmation",className:"w-full rounded-md px-4 py-2 bg-gray-200 dark:bg-theme-gray-600",placeholder:"Insira sua nova senha...",value:Z.passwordNewConfirmation,onChange:function(e){return E(e)}})]}),(0,d.jsx)("div",{className:"flex",children:(0,d.jsx)("button",{type:"submit",className:"bg-gray-200 dark:bg-theme-gray-600 py-1 font-semibold px-10 rounded-sm",children:"Salvar"})})]}),(0,d.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,d.jsx)(p.Z,{title:a.user.username,path:a.user.avatar}),(0,d.jsx)("div",{children:(0,d.jsx)("button",{className:"px-4 py-1 rounded-sm bg-gray-200 dark:bg-theme-gray-600",onClick:function(){return _(!S)},children:"Alterar Avatar/Foto"})})]})]}),S&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"bg-black fixed top-0 right-0 left-0 bottom-0 opacity-60 z-overlay"}),(0,d.jsx)("div",{className:"absolute top-0 right-0 left-0 mx-auto max-w-xl z-modal p-4",children:(0,d.jsx)(y,{studentId:a.user.alunoid,avatarId:a.user.avatarId,token:s.token})})]})]}),(0,d.jsx)(j.$,{})]}),(0,d.jsx)(m.x,{live:o,news:w})]})})}},9008:function(e,s,a){e.exports=a(5443)}},function(e){e.O(0,[13,186,987,111,999,874,937,164,449,835,592,185,366,774,888,179],(function(){return s=45824,e(e.s=s);var s}));var s=e.O();_N_E=s}]);